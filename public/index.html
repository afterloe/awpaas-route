<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="images/favicon.ico">

  <title>前置数据网关</title>

  <!-- Bootstrap core CSS -->
  <link href="lib/bootstrap.min.css" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="styles/dashboard.css" rel="stylesheet">
  <link href="styles/chart.css" rel="stylesheet">
  <link href="styles/index.css" rel="stylesheet">
</head>

<body>
  <!-- head -->
  <nav id="head"></nav>

  <div class="container-fluid">
    <div class="row">
      <!-- 左侧导航栏 -->
      <nav id="nav-left"></nav>

      <!-- 主页应用 -->
      <main id="main" role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4"></main>
      
    </div>
  </div>

  <!-- Bootstrap core JavaScript
    ================================================== -->
  <!-- <script src="lib/jquery-3.3.1.slim.min.js"></script> -->
  <!-- <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script> -->
  <!-- <script src="lib/popper.minjs"></script> -->
  <!-- <script src="lib/bootstrap.min.js"></script> -->

  <!-- react core JavaScript -->
  <script src="lib/react.production.min.js"></script>
  <script src="lib/react-dom.production.min.js"></script>

  <!-- Icons -->
  <script src="lib/feather.min.js"></script>

  <!-- Graphs -->
  <script src="lib/Chart.min.js"></script>

  <!-- jsx babel -->
  <script src="lib/babel.min.js"></script>

  <!-- 自定义 -->
  <script type="text/babel">
  "use strict";
  /**
   *  顶部导航栏 
   */
  class Header extends React.Component {
      constructor(props) {
          super(props);
      }

      render() {
        let p = this.props;
        return (
          <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
             <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">{p.name}</a>
             <input class="form-control form-control-dark w-100" type="text" placeholder="搜索" aria-label="搜索" />
             <ul class="navbar-nav px-3">
               <li class="nav-item text-nowrap">
                <a class="nav-link" href="#">{p.version}</a>
               </li>
             </ul>
          </nav>
        )
      }
  }
          
  ReactDOM.render(<Header name="前置数据网关" version="v1.0.3"/>, document.getElementById("head"))
  </script>

  <!-- 左侧导航栏 -->
  <script type="text/babel">
  "use strict";

  const systemMenu = [{
    name: "首页",
    icon: "images/home.svg",
    isClick: true
  }, {
    name: "白名单管理",
    icon: "images/file.svg"
  }, {
    name: "服务注册列表",
    icon: "images/layers.svg"
  }, {
    name: "活跃用户",
    icon: "images/users.svg"
  }, {
    name: "网关状态",
    icon: "images/bar-chart-2.svg"
  }]
  const linkMenu = [{
    name: "统一管理子系统",
    href: "https://127.0.0.1:8088"
  }, {
    name: "统一认证及审计子系统",
    href: "https://127.0.0.1:8088"
  }, {
    name: "蜂窝式数据仓库管理子系统",
    href: "https://127.0.0.1:8088"
  }, {
    name: "数据采集清洗引擎",
    href: "https://127.0.0.1:8088"
  }]

  class NavLeft extends React.Component {
    constructor(props) {
      super(props);
      this.state = props;
    }

    renderMenu() {
      const {menu = []} = this.state;
      return menu.map(it => (
        <li class="nav-item">
              <a class={it.isClick? "nav-link active":"nav-link"} href="#">
                <embed src={it.icon} width="16" height="16" type="image/svg+xml"/>
                {it.name} {it.isClick? (<span class="sr-only">(current)</span>): ""}
              </a>
        </li>
      ))
    }

    renderLink() {
      const {links = []} = this.state;
      return links.map(it => (
        <li class="nav-item">
             <a class="nav-link" href={it.href}>
              <embed src="images/link.svg" width="16" height="16" type="image/svg+xml"/>
                {it.name}
              </a>
        </li>
      ))
    }

    render() {
      return (
        <nav class="col-md-2 d-none d-md-block bg-light sidebar">
        <div class="sidebar-sticky">
          <ul class="nav flex-column">
            {this.renderMenu()}
          </ul>

          <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            <span>常用链接</span>
            <a class="d-flex align-items-center text-muted link" href="#">
              <embed src="images/plus-circle.svg" width="16" height="16" type="image/svg+xml"/>
            </a>
          </h6>
          <ul class="nav flex-column mb-2">
            {this.renderLink()}
          </ul>
        </div>
      </nav>
      )
    }
  }

  ReactDOM.render(<NavLeft menu={systemMenu} links={linkMenu}/>, document.getElementById("nav-left"))
  </script>

  <!-- 首页应用 -->
  <script type="text/babel">
  "use strict";

  class TotalMain extends React.Component {
    constructor(props) {
      super(props);
    }

    render() {
      return (
        <main>
        <div class="chartjs-size-monitor">
          <div class="chartjs-size-monitor-expand">
            <div></div>
          </div>
          <div class="chartjs-size-monitor-shrink">
            <div></div>
          </div>
        </div>
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2">流量</h1>
          <div class="btn-toolbar mb-2 mb-md-0">
            <div class="btn-group mr-2">
              <button class="btn btn-sm btn-outline-secondary">分享</button>
              <button class="btn btn-sm btn-outline-secondary">打印</button>
            </div>
            <button class="btn btn-sm btn-outline-secondary dropdown-toggle">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
              本周
            </button>
          </div>
        </div>

        <canvas class="my-4 w-100 chartjs-render-monitor" id="myChart" width="1053" height="444"></canvas>

        <h2>访问排行</h2>
        <div class="table-responsive">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
                <th>#</th>
                <th>服务名</th>
                <th>URL</th>
                <th>访问次数</th>
                <th>趋势</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1,001</td>
                <td>docker</td>
                <td>user/images/json</td>
                <td>50002</td>
                <td>-</td>
              </tr>
              <tr>
                <td>1,002</td>
                <td>docker</td>
                <td>user/images/json</td>
                <td>45020</td>
                <td>down</td>
              </tr>
              <tr>
                <td>1,003</td>
                <td>docker</td>
                <td>user/images/json</td>
                <td>33210</td>
                <td>up</td>
              </tr>
              <tr>
                <td>1,003</td>
                <td>docker</td>
                <td>user/images/json</td>
                <td>11000</td>
                <td>down</td>
              </tr>
              <tr>
                <td>1,004</td>
                <td>docker</td>
                <td>user/images/json</td>
                <td>3000</td>
                <td>-</td>
              </tr>
            </tbody>
          </table>
        </div>
      </main>
      )
    }
  }

  ReactDOM.render(<TotalMain />, document.getElementById("main"))
  </script>
  <script src="scripts/requestLine.js"></script>
</body>

</html>